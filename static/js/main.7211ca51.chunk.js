(this.webpackJsonpmatopeli=this.webpackJsonpmatopeli||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(7),o=n.n(r),s=(n(12),n(2)),i=(n(13),n(3)),u=function(e){return Object(i.a)(Array(Math.round(e)).keys())},l=(n(14),n(0)),j=function(e){var t=e.points,n=e.setPoints,c=Object(a.useState)(parseInt(localStorage.getItem("snake-board-size"))||10),r=Object(s.a)(c,2),o=r[0],j=r[1],b=Object(a.useState)(parseInt(localStorage.getItem("snake-board-size"))||10),d=Object(s.a)(b,2),f=d[0],x=d[1],O=function(){for(var e=[],t=0;t<o;t++){e[t]=[];for(var n=0;n<f;n++)e[t][n]="blank"}return e},p=function(){return[{name:"tyhj\xe4",location:[]},{name:"keski",location:u(.6*f).map((function(e){return{x:Math.round(o/2),y:e+Math.ceil(.2*f)}}))},{name:"reunat",location:[].concat(Object(i.a)(u(f).map((function(e){return{x:e,y:0}}))),Object(i.a)(u(f).map((function(e){return{x:e,y:o-1}}))),Object(i.a)(u(o).map((function(e){return{x:0,y:e}}))),Object(i.a)(u(o).map((function(e){return{x:o-1,y:e}}))))},{name:"oma",location:[{x:2,y:2},{x:3,y:2},{x:4,y:2},{x:5,y:3},{x:6,y:3},{x:7,y:3},{x:8,y:4},{x:8,y:5},{x:7,y:6},{x:6,y:6},{x:5,y:6},{x:4,y:7},{x:3,y:7},{x:2,y:7}]}]},m=function(){return p()[Math.floor(Math.random()*p.length)]},h=function e(){var t={x:Math.floor(Math.random()*f),y:Math.floor(Math.random()*o)};return k.location.some((function(e){var n=e.x,a=e.y;return t.x===n&&t.y===a}))?e():t},y=Object(a.useState)(m()),v=Object(s.a)(y,2),k=v[0],S=v[1],g=Object(a.useState)(O),N=Object(s.a)(g,2),w=N[0],I=N[1],E=Object(a.useState)([{x:1,y:1}]),M=Object(s.a)(E,2),A=M[0],P=M[1],B=Object(a.useState)("right"),J=Object(s.a)(B,2),L=J[0],z=J[1],C=Object(a.useState)(h),G=Object(s.a)(C,2),K=G[0],F=G[1],R=Object(a.useState)(),T=Object(s.a)(R,2),U=T[0],q=(T[1],Object(a.useState)(!1)),D=Object(s.a)(q,2),H=D[0],Q=D[1],V=Object(a.useState)(!1),W=Object(s.a)(V,2),X=W[0],Y=W[1],Z=Object(a.useState)(null),$=Object(s.a)(Z,2),_=$[0],ee=$[1];Object(a.useEffect)((function(){f>=10&&f<=100&o>=10&&o<=100&&(S(m()),I(O()),F(h()))}),[f,o]);document.addEventListener("keydown",(function(e){switch(e.keyCode){case 37:z("left");break;case 38:z("top");break;case 39:z("right");break;case 40:z("bottom")}}),!1);var te=w.map((function(e,t){return Object(l.jsx)("div",{className:"Snake-row",children:e.map((function(e,t){return Object(l.jsx)("div",{className:"tile ".concat(e)},t)}))},t)}));return function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){if(X){var e=[];switch(L){case"right":e.push({x:A[0].x,y:(A[0].y+1)%f});break;case"left":e.push({x:A[0].x,y:(A[0].y-1+f)%f});break;case"top":e.push({x:(A[0].x-1+o)%o,y:A[0].y});break;case"bottom":e.push({x:(A[0].x+1)%o,y:A[0].y})}if(function(){var e=A[0],t=A.slice(1,-1).find((function(t){return t.x===e.x&&t.y===e.y})),n=k.location.some((function(t){var n=t.x,a=t.y;return e.x===n&&e.y===a}));return t||n}()){Q(!0),clearInterval(U);var a=JSON.parse(localStorage.getItem("snake-points"))||[],c=prompt("Peli p\xe4\xe4ttyi! Anna pelimerkkisi!");a.push({name:c,points:t}),localStorage.setItem("snake-points",JSON.stringify(a)),window.dispatchEvent(new Event("storage"))}A.forEach((function(t){e.push(t)})),A[0].x===K.x&&A[0].y===K.y?(F(h),n(t+1)):e.pop(),P(e),function(){var e=O();A.forEach((function(t){e[t.x][t.y]="snake"})),e[K.x][K.y]="food",k.location.forEach((function(t){e[t.x][t.y]="obstacle"})),I(e)}()}}),250),Object(l.jsxs)("div",{className:"Snake-board",children:[!X&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{children:["Pelilaudan koko on nyt ",f," ruutua."]}),Object(l.jsx)("div",{children:"Aseta halutessasi uusi pelilaudan koko:"}),Object(l.jsx)("input",{className:"Board-size",placeholder:"Koko 10-100 (suositus 10-35)",type:"number",onChange:function(e){var t=parseInt(e.target.value);t<=100&&t>=10?(console.log("OK",t),x(t),j(t),localStorage.setItem("snake-board-size",t),ee(null)):(console.error("ei hyv\xe4",t),ee("Pelilaudan koko on liian ".concat(t>100?"suuri":"pieni")))}}),_&&Object(l.jsx)("div",{className:"Error",children:_}),Object(l.jsx)("button",{className:"Start-game",onClick:Y,children:"Aloita peli!"})]}),te,H&&Object(l.jsx)("div",{className:"Game-over",children:"Game over!"})]})},b=(n(16),function(e){var t=e.points;return Object(l.jsxs)("div",{className:"Points",children:[t," pistett\xe4"]})}),d=(n(17),function(){return JSON.parse(localStorage.getItem("snake-points"))||[]}),f=function(){var e=Object(a.useState)(d()),t=Object(s.a)(e,2),n=t[0],c=t[1];window.addEventListener("storage",(function(){c(d())}));n.sort((function(e,t){return t-e}));return Object(l.jsxs)("div",{className:"LeaderBoard",children:[Object(l.jsx)("div",{className:"LeaderBoard-header",children:"Top 5"}),Object(l.jsx)("div",{className:"LeaderBoard-points",children:n.sort((function(e,t){return t.points-e.points})).slice(0,5).map((function(e,t){return Object(l.jsxs)("div",{children:[e.name," ",e.points]},"".concat(e.points,"-").concat(t))}))})]})};var x=function(){var e=Object(a.useState)(0),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("header",{className:"App-header",children:"Matopeli"}),Object(l.jsxs)("div",{className:"Game",children:[Object(l.jsx)(b,{points:n}),Object(l.jsx)(j,{points:n,setPoints:c})]}),Object(l.jsx)("button",{onClick:function(){return window.location.reload(!1)},children:"Uusi peli"}),Object(l.jsx)(f,{})]})};o.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.7211ca51.chunk.js.map